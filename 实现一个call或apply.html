<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>实现一个call或apply</title>
</head>
<body>
    <script>
        /*
        call核心：
        1.将函数设为对象的属性
        2.执行&删除这个函数
        3.指定 this到函数并传入给定参数执行函数
        4.如果不传入参数，默认指向为 window
        */
        var foo = {
            value: 1,
            bar : function () {
                console.log( this.value );
            }
        }
        window.foo3 = {
            value: 108
        }
       /* Function.prototype.newCall = function ( content  ){
            content  =    ( content != undefined ? content : window )
            content.fn = this
            console.log( arguments )
            console.log( content )
            let args = [...arguments].slice( 1 );
            console.log(  args )
            let result = content.fn( ...args );
            delete content.fn;
            return result;
        }*/
        Function.prototype.newCall = function (  ){
            arguments[0]  =    ( arguments[0] != undefined ? arguments[0] : window )
            arguments[0].fn = this
            let args = [...arguments].slice( 1 );
            let result = arguments[0].fn( ...args );
            delete arguments[0].fn;
            return result;
        }
        Function.prototype.newApply = function ( content ){
            content  =    ( content != undefined ? content : window )
            content.fn = this
            console.log( arguments )
            console.log( content )
            var result;
            if( arguments[1] ){
                if( Object.prototype.toString.call( arguments[1] ) == "[object Array]" ){
                    result = content.fn( ...arguments[1] );
                } else {
                    throw Error( "not a arr" );
                }
            }else{
                result = content.fn( );
            }
            delete content.fn;
            return result;
        }
        var foo2 = {
            value:10
        }
        function say(name){
            console.log( name )
        }

        Function.prototype.call22 = function(){
             var fn = typeof arguments[0] == undefined ? window : arguments[0];




        }

        say.newApply( foo2 , "a1" );

    </script>
</body>
</html>